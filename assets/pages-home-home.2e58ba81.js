import{d as t,m as e,a as i,o as s,c as n,w as a,n as o,b as r,e as l,f as c,g as d,F as u,r as h,i as p,h as g,j as m,k as y,l as f,t as _,p as w,q as b,s as k,u as v,S as x,v as S,x as $,y as C,z as I,A as T,B as N,C as M,D as z,E as B,G as j,H as A,I as U,J as O,K as L,L as R,M as P,N as F,O as H,P as W,Q as D,R as V,T as q,U as E,V as G,W as Z,X,Y as J,Z as K,_ as Q,$ as Y,a0 as tt}from"./index-9c69a4ad.js";import{_ as et}from"./u-loading-icon.3820d343.js";import{_ as it}from"./plugin-vueexport-helper.1b428a4d.js";import{_ as st}from"./u-icon.44e97e9b.js";import{_ as nt}from"./u-transition.da536e2e.js";import{_ as at,a as ot}from"./uni-popup.0a4da423.js";import{u as rt,p as lt}from"./pushConfigDialog.48954dc0.js";import"./uni-list-item.6d2845eb.js";import"./uni-icons.c5d94a02.js";import"./uni-easyinput.2713140a.js";import"./u-row.66d31e31.js";import"./u-avatar.7e9ff50c.js";import"./u--text.4a547c95.js";import"./u-text.60b44da1.js";const ct=it({name:"u-swiper-indicator",mixins:[e,i,{props:{length:{type:[String,Number],default:t.swiperIndicator.length},current:{type:[String,Number],default:t.swiperIndicator.current},indicatorActiveColor:{type:String,default:t.swiperIndicator.indicatorActiveColor},indicatorInactiveColor:{type:String,default:t.swiperIndicator.indicatorInactiveColor},indicatorMode:{type:String,default:t.swiperIndicator.indicatorMode}}}],data:()=>({lineWidth:22}),computed:{lineStyle(){let t={};return t.width=uni.$u.addUnit(this.lineWidth),t.transform=`translateX(${uni.$u.addUnit(this.current*this.lineWidth)})`,t.backgroundColor=this.indicatorActiveColor,t},dotStyle(){return t=>{let e={};return e.backgroundColor=t===this.current?this.indicatorActiveColor:this.indicatorInactiveColor,e}}}},[["render",function(t,e,i,g,m,y){const f=p;return s(),n(f,{class:"u-swiper-indicator"},{default:a((()=>["line"===t.indicatorMode?(s(),n(f,{key:0,class:o(["u-swiper-indicator__wrapper",[`u-swiper-indicator__wrapper--${t.indicatorMode}`]]),style:r({width:t.$u.addUnit(m.lineWidth*t.length),backgroundColor:t.indicatorInactiveColor})},{default:a((()=>[l(f,{class:"u-swiper-indicator__wrapper--line__bar",style:r([y.lineStyle])},null,8,["style"])])),_:1},8,["class","style"])):c("",!0),"dot"===t.indicatorMode?(s(),n(f,{key:1,class:"u-swiper-indicator__wrapper"},{default:a((()=>[(s(!0),d(u,null,h(t.length,((e,i)=>(s(),n(f,{class:o(["u-swiper-indicator__wrapper__dot",[i===t.current&&"u-swiper-indicator__wrapper__dot--active"]]),key:i,style:r([y.dotStyle(i)])},null,8,["class","style"])))),128))])),_:1})):c("",!0)])),_:1})}],["__scopeId","data-v-7a79e5f1"]]);const dt=it({name:"u-swiper",mixins:[e,i,{props:{list:{type:Array,default:t.swiper.list},indicator:{type:Boolean,default:t.swiper.indicator},indicatorActiveColor:{type:String,default:t.swiper.indicatorActiveColor},indicatorInactiveColor:{type:String,default:t.swiper.indicatorInactiveColor},indicatorStyle:{type:[String,Object],default:t.swiper.indicatorStyle},indicatorMode:{type:String,default:t.swiper.indicatorMode},autoplay:{type:Boolean,default:t.swiper.autoplay},current:{type:[String,Number],default:t.swiper.current},currentItemId:{type:String,default:t.swiper.currentItemId},interval:{type:[String,Number],default:t.swiper.interval},duration:{type:[String,Number],default:t.swiper.duration},circular:{type:Boolean,default:t.swiper.circular},previousMargin:{type:[String,Number],default:t.swiper.previousMargin},nextMargin:{type:[String,Number],default:t.swiper.nextMargin},acceleration:{type:Boolean,default:t.swiper.acceleration},displayMultipleItems:{type:Number,default:t.swiper.displayMultipleItems},easingFunction:{type:String,default:t.swiper.easingFunction},keyName:{type:String,default:t.swiper.keyName},imgMode:{type:String,default:t.swiper.imgMode},height:{type:[String,Number],default:t.swiper.height},bgColor:{type:String,default:t.swiper.bgColor},radius:{type:[String,Number],default:t.swiper.radius},loading:{type:Boolean,default:t.swiper.loading},showTitle:{type:Boolean,default:t.swiper.showTitle}}}],data:()=>({currentIndex:0}),watch:{current(t,e){t!==e&&(this.currentIndex=t)}},computed:{itemStyle(){return t=>{const e={};return this.nextMargin&&this.previousMargin&&(e.borderRadius=uni.$u.addUnit(this.radius),t!==this.currentIndex&&(e.transform="scale(0.92)")),e}}},methods:{getItemType(t){return"string"==typeof t?uni.$u.test.video(this.getSource(t))?"video":"image":"object"==typeof t&&this.keyName?t.type?"image"===t.type?"image":"video"===t.type?"video":"image":uni.$u.test.video(this.getSource(t))?"video":"image":void 0},getSource(t){return"string"==typeof t?t:"object"==typeof t&&this.keyName?t[this.keyName]:(uni.$u.error("请按格式传递列表参数"),"")},change(t){const{current:e}=t.detail;this.pauseVideo(this.currentIndex),this.currentIndex=e,this.$emit("change",t.detail)},pauseVideo(t){const e=this.getSource(this.list[t]);if(uni.$u.test.video(e)){g(`video-${t}`,this).pause()}},getPoster:t=>"object"==typeof t&&t.poster?t.poster:"",clickHandler(t){this.$emit("click",t)}}},[["render",function(t,e,i,o,g,$){const C=m(y("u-loading-icon"),et),I=p,T=b,N=k,M=v,z=x,B=S,j=m(y("u-swiper-indicator"),ct);return s(),n(I,{class:"u-swiper",style:r({backgroundColor:t.bgColor,height:t.$u.addUnit(t.height),borderRadius:t.$u.addUnit(t.radius)})},{default:a((()=>[t.loading?(s(),n(I,{key:0,class:"u-swiper__loading"},{default:a((()=>[l(C,{mode:"circle"})])),_:1})):(s(),n(B,{key:1,class:"u-swiper__wrapper",style:r({height:t.$u.addUnit(t.height)}),onChange:$.change,circular:t.circular,interval:t.interval,duration:t.duration,autoplay:t.autoplay,current:t.current,currentItemId:t.currentItemId,previousMargin:t.$u.addUnit(t.previousMargin),nextMargin:t.$u.addUnit(t.nextMargin),acceleration:t.acceleration,displayMultipleItems:t.displayMultipleItems,easingFunction:t.easingFunction},{default:a((()=>[(s(!0),d(u,null,h(t.list,((e,i)=>(s(),n(z,{class:"u-swiper__wrapper__item",key:i},{default:a((()=>[l(I,{class:"u-swiper__wrapper__item__wrapper",style:r([$.itemStyle(i)])},{default:a((()=>["image"===$.getItemType(e)?(s(),n(T,{key:0,class:"u-swiper__wrapper__item__wrapper__image",src:$.getSource(e),mode:t.imgMode,onClick:t=>$.clickHandler(i),style:r({height:t.$u.addUnit(t.height),borderRadius:t.$u.addUnit(t.radius)})},null,8,["src","mode","onClick","style"])):c("",!0),"video"===$.getItemType(e)?(s(),n(N,{key:1,class:"u-swiper__wrapper__item__wrapper__video",id:`video-${i}`,"enable-progress-gesture":!1,src:$.getSource(e),poster:$.getPoster(e),title:t.showTitle&&t.$u.test.object(e)&&e.title?e.title:"",style:r({height:t.$u.addUnit(t.height)}),controls:"",onClick:t=>$.clickHandler(i)},null,8,["id","src","poster","title","style","onClick"])):c("",!0),t.showTitle&&t.$u.test.object(e)&&e.title&&t.$u.test.image($.getSource(e))?(s(),n(M,{key:2,class:"u-swiper__wrapper__item__wrapper__title u-line-1"},{default:a((()=>[f(_(e.title),1)])),_:2},1024)):c("",!0)])),_:2},1032,["style"])])),_:2},1024)))),128))])),_:1},8,["style","onChange","circular","interval","duration","autoplay","current","currentItemId","previousMargin","nextMargin","acceleration","displayMultipleItems","easingFunction"])),l(I,{class:"u-swiper__indicator",style:r([t.$u.addStyle(t.indicatorStyle)])},{default:a((()=>[w(t.$slots,"indicator",{},(()=>[t.loading||!t.indicator||t.showTitle?c("",!0):(s(),n(j,{key:0,indicatorActiveColor:t.indicatorActiveColor,indicatorInactiveColor:t.indicatorInactiveColor,length:t.list.length,current:g.currentIndex,indicatorMode:t.indicatorMode},null,8,["indicatorActiveColor","indicatorInactiveColor","length","current","indicatorMode"]))]),!0)])),_:3},8,["style"])])),_:3},8,["style"])}],["__scopeId","data-v-c342989f"]]);const ut=it({mixins:[e,i,{props:{text:{type:[Array],default:t.columnNotice.text},icon:{type:String,default:t.columnNotice.icon},mode:{type:String,default:t.columnNotice.mode},color:{type:String,default:t.columnNotice.color},bgColor:{type:String,default:t.columnNotice.bgColor},fontSize:{type:[String,Number],default:t.columnNotice.fontSize},speed:{type:[String,Number],default:t.columnNotice.speed},step:{type:Boolean,default:t.columnNotice.step},duration:{type:[String,Number],default:t.columnNotice.duration},disableTouch:{type:Boolean,default:t.columnNotice.disableTouch}}}],watch:{text:{immediate:!0,handler(t,e){uni.$u.test.array(t)||uni.$u.error("noticebar组件direction为column时，要求text参数为数组形式")}}},computed:{textStyle(){let t={};return t.color=this.color,t.fontSize=uni.$u.addUnit(this.fontSize),t},vertical(){return"horizontal"!=this.mode}},data:()=>({index:0}),methods:{noticeChange(t){this.index=t.detail.current},clickHandler(){this.$emit("click",this.index)},close(){this.$emit("close")}}},[["render",function(t,e,i,o,g,b){const k=m(y("u-icon"),st),$=p,C=v,I=x,T=S;return s(),n($,{class:"u-notice",onClick:b.clickHandler},{default:a((()=>[w(t.$slots,"icon",{},(()=>[t.icon?(s(),n($,{key:0,class:"u-notice__left-icon"},{default:a((()=>[l(k,{name:t.icon,color:t.color,size:"19"},null,8,["name","color"])])),_:1})):c("",!0)]),!0),l(T,{"disable-touch":t.disableTouch,vertical:!t.step,circular:"",interval:t.duration,autoplay:!0,class:"u-notice__swiper",onChange:b.noticeChange},{default:a((()=>[(s(!0),d(u,null,h(t.text,((t,e)=>(s(),n(I,{key:e,class:"u-notice__swiper__item"},{default:a((()=>[l(C,{class:"u-notice__swiper__item__text u-line-1",style:r([b.textStyle])},{default:a((()=>[f(_(t),1)])),_:2},1032,["style"])])),_:2},1024)))),128))])),_:1},8,["disable-touch","vertical","interval","onChange"]),["link","closable"].includes(t.mode)?(s(),n($,{key:0,class:"u-notice__right-icon"},{default:a((()=>["link"===t.mode?(s(),n(k,{key:0,name:"arrow-right",size:17,color:t.color},null,8,["color"])):c("",!0),"closable"===t.mode?(s(),n(k,{key:1,name:"close",size:16,color:t.color,onClick:b.close},null,8,["color","onClick"])):c("",!0)])),_:1})):c("",!0)])),_:3},8,["onClick"])}],["__scopeId","data-v-3caa2950"]]);const ht=it({name:"u-row-notice",mixins:[e,i,{props:{text:{type:String,default:t.rowNotice.text},icon:{type:String,default:t.rowNotice.icon},mode:{type:String,default:t.rowNotice.mode},color:{type:String,default:t.rowNotice.color},bgColor:{type:String,default:t.rowNotice.bgColor},fontSize:{type:[String,Number],default:t.rowNotice.fontSize},speed:{type:[String,Number],default:t.rowNotice.speed}}}],data:()=>({animationDuration:"0",animationPlayState:"paused",nvueInit:!0,show:!0}),watch:{text:{immediate:!0,handler(t,e){this.vue(),uni.$u.test.string(t)||uni.$u.error("noticebar组件direction为row时，要求text参数为字符串形式")}},fontSize(){this.vue()},speed(){this.vue()}},computed:{textStyle(){let t={};return t.color=this.color,t.fontSize=uni.$u.addUnit(this.fontSize),t},animationStyle(){let t={};return t.animationDuration=this.animationDuration,t.animationPlayState=this.animationPlayState,t},innerText(){let t=[];const e=this.text.split("");for(let i=0;i<e.length;i+=20)t.push(e.slice(i,i+20).join(""));return t}},mounted(){this.init()},methods:{init(){this.vue(),uni.$u.test.string(this.text)||uni.$u.error("noticebar组件direction为row时，要求text参数为字符串形式")},async vue(){let t=0;await uni.$u.sleep(),t=(await this.$uGetRect(".u-notice__content__text")).width,(await this.$uGetRect(".u-notice__content")).width,this.animationDuration=t/uni.$u.getPx(this.speed)+"s",this.animationPlayState="paused",setTimeout((()=>{this.animationPlayState="running"}),10)},async nvue(){},loopAnimation(t,e){},getNvueRect(t){},clickHandler(t){this.$emit("click")},close(){this.$emit("close")}}},[["render",function(t,e,i,o,g,b){const k=m(y("u-icon"),st),x=p,S=v;return s(),n(x,{class:"u-notice",onClick:b.clickHandler},{default:a((()=>[w(t.$slots,"icon",{},(()=>[t.icon?(s(),n(x,{key:0,class:"u-notice__left-icon"},{default:a((()=>[l(k,{name:t.icon,color:t.color,size:"19"},null,8,["name","color"])])),_:1})):c("",!0)]),!0),l(x,{class:"u-notice__content",ref:"u-notice__content"},{default:a((()=>[l(x,{ref:"u-notice__content__text",class:"u-notice__content__text",style:r([b.animationStyle])},{default:a((()=>[(s(!0),d(u,null,h(b.innerText,((t,e)=>(s(),n(S,{key:e,style:r([b.textStyle])},{default:a((()=>[f(_(t),1)])),_:2},1032,["style"])))),128))])),_:1},8,["style"])])),_:1},512),["link","closable"].includes(t.mode)?(s(),n(x,{key:0,class:"u-notice__right-icon"},{default:a((()=>["link"===t.mode?(s(),n(k,{key:0,name:"arrow-right",size:17,color:t.color},null,8,["color"])):c("",!0),"closable"===t.mode?(s(),n(k,{key:1,onClick:b.close,name:"close",size:16,color:t.color},null,8,["onClick","color"])):c("",!0)])),_:1})):c("",!0)])),_:3},8,["onClick"])}],["__scopeId","data-v-40b49f48"]]);const pt=it({name:"u-notice-bar",mixins:[e,i,{props:{text:{type:[Array,String],default:t.noticeBar.text},direction:{type:String,default:t.noticeBar.direction},step:{type:Boolean,default:t.noticeBar.step},icon:{type:String,default:t.noticeBar.icon},mode:{type:String,default:t.noticeBar.mode},color:{type:String,default:t.noticeBar.color},bgColor:{type:String,default:t.noticeBar.bgColor},speed:{type:[String,Number],default:t.noticeBar.speed},fontSize:{type:[String,Number],default:t.noticeBar.fontSize},duration:{type:[String,Number],default:t.noticeBar.duration},disableTouch:{type:Boolean,default:t.noticeBar.disableTouch},url:{type:String,default:t.noticeBar.url},linkType:{type:String,default:t.noticeBar.linkType}}}],data:()=>({show:!0}),methods:{click(t){this.$emit("click",t),this.url&&this.linkType&&this.openPage()},close(){this.show=!1,this.$emit("close")}}},[["render",function(t,e,i,o,l,d){const u=m(y("u-column-notice"),ut),h=m(y("u-row-notice"),ht),g=p;return l.show?(s(),n(g,{key:0,class:"u-notice-bar",style:r([{backgroundColor:t.bgColor},t.$u.addStyle(t.customStyle)])},{default:a((()=>["column"===t.direction||"row"===t.direction&&t.step?(s(),n(u,{key:0,color:t.color,bgColor:t.bgColor,text:t.text,mode:t.mode,step:t.step,icon:t.icon,"disable-touch":t.disableTouch,fontSize:t.fontSize,duration:t.duration,onClose:d.close,onClick:d.click},null,8,["color","bgColor","text","mode","step","icon","disable-touch","fontSize","duration","onClose","onClick"])):(s(),n(h,{key:1,color:t.color,bgColor:t.bgColor,text:t.text,mode:t.mode,fontSize:t.fontSize,speed:t.speed,url:t.url,linkType:t.linkType,icon:t.icon,onClose:d.close,onClick:d.click},null,8,["color","bgColor","text","mode","fontSize","speed","url","linkType","icon","onClose","onClick"]))])),_:1},8,["style"])):c("",!0)}],["__scopeId","data-v-abff91ff"]]);var gt={abbr:!0,b:!0,big:!0,code:!0,del:!0,em:!0,i:!0,ins:!0,label:!0,q:!0,small:!0,span:!0,strong:!0,sub:!0,sup:!0};const mt={isInline:function(t,e){return gt[t]||-1!==(e||"").indexOf("display:inline")}},yt=t=>{t.$wxs||(t.$wxs=[]),t.$wxs.push("handler"),t.mixins||(t.mixins=[]),t.mixins.push({beforeCreate(){this.handler=mt}})},ft={name:"node",options:{},data:()=>({ctrl:{}}),props:{name:String,attrs:{type:Object,default:()=>({})},childs:Array,opts:Array},components:{},mounted(){if(this.$nextTick((()=>{for(this.root=this.$parent;"u-parse"!==this.root.$options.name;this.root=this.root.$parent);})),this.opts[0]){let t;for(t=this.childs.length;t--&&"img"!==this.childs[t].name;);-1!==t&&(this.observer=$(this).relativeToViewport({top:500,bottom:500}),this.observer.observe("._img",(t=>{t.intersectionRatio&&(this.$set(this.ctrl,"load",1),this.observer.disconnect())})))}},beforeDestroy(){this.observer&&this.observer.disconnect()},methods:{play(t){if(this.root.$emit("play"),this.root.pauseVideo){let e=!1;const i=t.target.id;for(let t=this.root._videos.length;t--;)this.root._videos[t].id===i?e=!0:this.root._videos[t].pause();if(!e){const t=g(i,this);t.id=i,this.root.playbackRate&&t.playbackRate(this.root.playbackRate),this.root._videos.push(t)}}},imgTap(t){const e=this.childs[t.currentTarget.dataset.i];e.a?this.linkTap(e.a):e.attrs.ignore||(e.attrs.src=e.attrs.src||e.attrs["data-src"],this.root.$emit("imgtap",e.attrs),this.root.previewImg&&C({current:parseInt(e.attrs.i),urls:this.root.imgList}))},imgLongTap(t){},imgLoad(t){const e=t.currentTarget.dataset.i;(this.opts[1]&&!this.ctrl[e]||-1===this.ctrl[e])&&this.$set(this.ctrl,e,1),this.checkReady()},checkReady(){this.root.lazyLoad||(this.root._unloadimgs-=1,this.root._unloadimgs||setTimeout((()=>{this.root.getRect().then((t=>{this.root.$emit("ready",t)})).catch((()=>{this.root.$emit("ready",{})}))}),350))},linkTap(t){const e=t.currentTarget?this.childs[t.currentTarget.dataset.i]:{},i=e.attrs||t,s=i.href;this.root.$emit("linktap",Object.assign({innerText:this.root.getText(e.children||[])},i)),s&&("#"===s[0]?this.root.navigateTo(s.substring(1)).catch((()=>{})):s.split("?")[0].includes("://")?this.root.copyLink&&window.open(s):I({url:s,fail(){T({url:s,fail(){}})}}))},mediaError(t){const e=t.currentTarget.dataset.i,i=this.childs[e];if("video"===i.name||"audio"===i.name){let t=(this.ctrl[e]||0)+1;if(t>i.src.length&&(t=0),t<i.src.length)return void this.$set(this.ctrl,e,t)}else if("img"===i.name){if(this.opts[0]&&!this.ctrl.load)return;this.opts[2]&&this.$set(this.ctrl,e,-1),this.checkReady()}this.root&&this.root.$emit("error",{source:i.name,attrs:i.attrs})}}};yt(ft);const _t=it(ft,[["render",function(t,e,i,g,m,y){const w=b,x=v,S=N("node",!0),$=p,C=k,I=z;return s(),n($,{id:i.attrs.id,class:o("_block _"+i.name+" "+i.attrs.class),style:r(i.attrs.style)},{default:a((()=>[(s(!0),d(u,null,h(i.childs,((p,g)=>(s(),d(u,{key:g},["img"===p.name&&!p.t&&(i.opts[1]&&!m.ctrl[g]||m.ctrl[g]<0)?(s(),n(w,{key:0,class:"_img",style:r(p.attrs.style),src:m.ctrl[g]<0?i.opts[2]:i.opts[1],mode:"widthFix"},null,8,["style","src"])):c("",!0),"img"===p.name?(s(),d("img",{key:1,id:p.attrs.id,class:o("_img "+p.attrs.class),style:r((-1===m.ctrl[g]?"display:none;":"")+p.attrs.style),src:p.attrs.src||(m.ctrl.load?p.attrs["data-src"]:""),"data-i":g,onLoad:e[0]||(e[0]=(...t)=>y.imgLoad&&y.imgLoad(...t)),onError:e[1]||(e[1]=(...t)=>y.mediaError&&y.mediaError(...t)),onClick:e[2]||(e[2]=M(((...t)=>y.imgTap&&y.imgTap(...t)),["stop"])),onLongpress:e[3]||(e[3]=(...t)=>y.imgLongTap&&y.imgLongTap(...t))},null,46,["id","src","data-i"])):p.text?(s(),n(x,{key:2,decode:""},{default:a((()=>[f(_(p.text),1)])),_:2},1024)):"br"===p.name?(s(),n(x,{key:3},{default:a((()=>[f("\\n")])),_:1})):"a"===p.name?(s(),n($,{key:4,id:p.attrs.id,class:o((p.attrs.href?"_a ":"")+p.attrs.class),"hover-class":"_hover",style:r("display:inline;"+p.attrs.style),"data-i":g,onClick:M(y.linkTap,["stop"])},{default:a((()=>[l(S,{name:"span",childs:p.children,opts:i.opts,style:{display:"inherit"}},null,8,["childs","opts"])])),_:2},1032,["id","class","style","data-i","onClick"])):"video"===p.name?(s(),n(C,{key:5,id:p.attrs.id,class:o(p.attrs.class),style:r(p.attrs.style),autoplay:p.attrs.autoplay,controls:p.attrs.controls,loop:p.attrs.loop,muted:p.attrs.muted,"object-fit":p.attrs["object-fit"],poster:p.attrs.poster,src:p.src[m.ctrl[g]||0],"data-i":g,onPlay:y.play,onError:y.mediaError},null,8,["id","class","style","autoplay","controls","loop","muted","object-fit","poster","src","data-i","onPlay","onError"])):"iframe"===p.name?(s(),d("iframe",{key:6,style:r(p.attrs.style),allowfullscreen:p.attrs.allowfullscreen,frameborder:p.attrs.frameborder,src:p.attrs.src},null,12,["allowfullscreen","frameborder","src"])):"embed"===p.name?(s(),d("embed",{key:7,style:r(p.attrs.style),src:p.attrs.src},null,12,["src"])):"table"===p.name&&p.c||"li"===p.name?(s(),n($,{key:8,id:p.attrs.id,class:o("_"+p.name+" "+p.attrs.class),style:r(p.attrs.style)},{default:a((()=>["li"===p.name?(s(),n(S,{key:0,childs:p.children,opts:i.opts},null,8,["childs","opts"])):(s(!0),d(u,{key:1},h(p.children,((t,e)=>(s(),n($,{key:e,class:o("_"+t.name+" "+t.attrs.class),style:r(t.attrs.style)},{default:a((()=>["td"===t.name||"th"===t.name?(s(),n(S,{key:0,childs:t.children,opts:i.opts},null,8,["childs","opts"])):(s(!0),d(u,{key:1},h(t.children,((t,e)=>(s(),d(u,{key:e},["td"===t.name||"th"===t.name?(s(),n($,{key:0,class:o("_"+t.name+" "+t.attrs.class),style:r(t.attrs.style)},{default:a((()=>[l(S,{childs:t.children,opts:i.opts},null,8,["childs","opts"])])),_:2},1032,["class","style"])):(s(),n($,{key:1,class:o("_"+t.name+" "+t.attrs.class),style:r(t.attrs.style)},{default:a((()=>[(s(!0),d(u,null,h(t.children,((t,e)=>(s(),n($,{key:e,class:o("_"+t.name+" "+t.attrs.class),style:r(t.attrs.style)},{default:a((()=>[l(S,{childs:t.children,opts:i.opts},null,8,["childs","opts"])])),_:2},1032,["class","style"])))),128))])),_:2},1032,["class","style"]))],64)))),128))])),_:2},1032,["class","style"])))),128))])),_:2},1032,["id","class","style"])):p.c||t.handler.isInline(p.name,p.attrs.style)?2===p.c?(s(),n($,{key:10,id:p.attrs.id,class:o("_block _"+p.name+" "+p.attrs.class),style:r(p.f+";"+p.attrs.style)},{default:a((()=>[(s(!0),d(u,null,h(p.children,((t,e)=>(s(),n(S,{key:e,style:r(t.f),name:t.name,attrs:t.attrs,childs:t.children,opts:i.opts},null,8,["style","name","attrs","childs","opts"])))),128))])),_:2},1032,["id","class","style"])):(s(),n(S,{key:11,style:r(p.f),name:p.name,attrs:p.attrs,childs:p.children,opts:i.opts},null,8,["style","name","attrs","childs","opts"])):(s(),n(I,{key:9,id:p.attrs.id,style:r(p.f),"user-select":i.opts[4],nodes:[p]},null,8,["id","style","user-select","nodes"]))],64)))),128))])),_:1},8,["id","class","style"])}],["__scopeId","data-v-1e248563"]]),wt={trustTags:St("a,abbr,ad,audio,b,blockquote,br,code,col,colgroup,dd,del,dl,dt,div,em,fieldset,h1,h2,h3,h4,h5,h6,hr,i,img,ins,label,legend,li,ol,p,q,ruby,rt,source,span,strong,sub,sup,table,tbody,td,tfoot,th,thead,tr,title,ul,video"),blockTags:St("address,article,aside,body,caption,center,cite,footer,header,html,nav,pre,section"),ignoreTags:St("area,base,canvas,embed,frame,head,iframe,input,link,map,meta,param,rp,script,source,style,textarea,title,track,wbr"),voidTags:St("area,base,br,col,circle,ellipse,embed,frame,hr,img,input,line,link,meta,param,path,polygon,rect,source,track,use,wbr"),entities:{lt:"<",gt:">",quot:'"',apos:"'",ensp:" ",emsp:" ",nbsp:" ",semi:";",ndash:"–",mdash:"—",middot:"·",lsquo:"‘",rsquo:"’",ldquo:"“",rdquo:"”",bull:"•",hellip:"…",larr:"←",uarr:"↑",rarr:"→",darr:"↓"},tagStyle:{address:"font-style:italic",big:"display:inline;font-size:1.2em",caption:"display:table-caption;text-align:center",center:"text-align:center",cite:"font-style:italic",dd:"margin-left:40px",mark:"background-color:yellow",pre:"font-family:monospace;white-space:pre",s:"text-decoration:line-through",small:"display:inline;font-size:0.8em",strike:"text-decoration:line-through",u:"text-decoration:underline"},svgDict:{animatetransform:"animateTransform",lineargradient:"linearGradient",viewbox:"viewBox",attributename:"attributeName",repeatcount:"repeatCount",repeatdur:"repeatDur"}},bt={},{windowWidth:kt}=B(),vt=St(" ,\r,\n,\t,\f");let xt=0;function St(t){const e=Object.create(null),i=t.split(",");for(let s=i.length;s--;)e[i[s]]=!0;return e}function $t(t,e){let i=t.indexOf("&");for(;-1!==i;){const s=t.indexOf(";",i+3);let n;if(-1===s)break;"#"===t[i+1]?(n=parseInt(("x"===t[i+2]?"0":"")+t.substring(i+2,s)),isNaN(n)||(t=t.substr(0,i)+String.fromCharCode(n)+t.substr(s+1))):(n=t.substring(i+1,s),(wt.entities[n]||"amp"===n&&e)&&(t=t.substr(0,i)+(wt.entities[n]||"&")+t.substr(s+1))),i=t.indexOf("&",i+1)}return t}function Ct(t){let e=t.length-1;for(let i=e;i>=-1;i--)(-1===i||t[i].c||!t[i].name||"div"!==t[i].name&&"p"!==t[i].name&&"h"!==t[i].name[0]||(t[i].attrs.style||"").includes("inline"))&&(e-i>=5&&t.splice(i+1,e-i,{name:"div",attrs:{},children:t.slice(i+1,e+1)}),e=i-1)}function It(t){this.options=t||{},this.tagStyle=Object.assign({},wt.tagStyle,this.options.tagStyle),this.imgList=t.imgList||[],this.imgList._unloadimgs=0,this.plugins=t.plugins||[],this.attrs=Object.create(null),this.stack=[],this.nodes=[],this.pre=(this.options.containerStyle||"").includes("white-space")&&this.options.containerStyle.includes("pre")?2:0}function Tt(t){this.handler=t}wt.ignoreTags.iframe=void 0,wt.trustTags.iframe=!0,wt.ignoreTags.embed=void 0,wt.trustTags.embed=!0,It.prototype.parse=function(t){for(let e=this.plugins.length;e--;)this.plugins[e].onUpdate&&(t=this.plugins[e].onUpdate(t,wt)||t);for(new Tt(this).parse(t);this.stack.length;)this.popNode();return this.nodes.length>50&&Ct(this.nodes),this.nodes},It.prototype.expose=function(){for(let t=this.stack.length;t--;){const e=this.stack[t];if(e.c||"a"===e.name||"video"===e.name||"audio"===e.name)return;e.c=1}},It.prototype.hook=function(t){for(let e=this.plugins.length;e--;)if(this.plugins[e].onParse&&!1===this.plugins[e].onParse(t,this))return!1;return!0},It.prototype.getUrl=function(t){const e=this.options.domain;return"/"===t[0]?"/"===t[1]?t=(e?e.split("://")[0]:"http")+":"+t:e&&(t=e+t):t.includes("data:")||t.includes("://")||e&&(t=e+"/"+t),t},It.prototype.parseStyle=function(t){const e=t.attrs,i=(this.tagStyle[t.name]||"").split(";").concat((e.style||"").split(";")),s={};let n="";e.id&&!this.xml&&(this.options.useAnchor?this.expose():"img"!==t.name&&"a"!==t.name&&"video"!==t.name&&"audio"!==t.name&&(e.id=void 0)),e.width&&(s.width=parseFloat(e.width)+(e.width.includes("%")?"%":"px"),e.width=void 0),e.height&&(s.height=parseFloat(e.height)+(e.height.includes("%")?"%":"px"),e.height=void 0);for(let a=0,o=i.length;a<o;a++){const t=i[a].split(":");if(t.length<2)continue;const e=t.shift().trim().toLowerCase();let o=t.join(":").trim();if("-"===o[0]&&o.lastIndexOf("-")>0||o.includes("safe"))n+=`;${e}:${o}`;else if(!s[e]||o.includes("import")||!s[e].includes("import")){if(o.includes("url")){let t=o.indexOf("(")+1;if(t){for(;'"'===o[t]||"'"===o[t]||vt[o[t]];)t++;o=o.substr(0,t)+this.getUrl(o.substr(t))}}else o.includes("rpx")&&(o=o.replace(/[0-9.]+\s*rpx/g,(t=>parseFloat(t)*kt/750+"px")));s[e]=o}}return t.attrs.style=n,s},It.prototype.onTagName=function(t){this.tagName=this.xml?t:t.toLowerCase(),"svg"===this.tagName&&(this.xml=(this.xml||0)+1)},It.prototype.onAttrName=function(t){"data-"===(t=this.xml?t:t.toLowerCase()).substr(0,5)?"data-src"!==t||this.attrs.src?"img"===this.tagName||"a"===this.tagName?this.attrName=t:this.attrName=void 0:this.attrName="src":(this.attrName=t,this.attrs[t]="T")},It.prototype.onAttrVal=function(t){const e=this.attrName||"";"style"===e||"href"===e?this.attrs[e]=$t(t,!0):e.includes("src")?this.attrs[e]=this.getUrl($t(t,!0)):e&&(this.attrs[e]=t)},It.prototype.onOpenTag=function(t){const e=Object.create(null);e.name=this.tagName,e.attrs=this.attrs,this.options.nodes.length&&(e.type="node"),this.attrs=Object.create(null);const i=e.attrs,s=this.stack[this.stack.length-1],n=s?s.children:this.nodes,a=this.xml?t:wt.voidTags[e.name];if(bt[e.name]&&(i.class=bt[e.name]+(i.class?" "+i.class:"")),"embed"===e.name&&this.expose(),"video"!==e.name&&"audio"!==e.name||("video"!==e.name||i.id||(i.id="v"+xt++),i.controls||i.autoplay||(i.controls="T"),e.src=[],i.src&&(e.src.push(i.src),i.src=void 0),this.expose()),a){if(!this.hook(e)||wt.ignoreTags[e.name])return void("base"!==e.name||this.options.domain?"source"===e.name&&s&&("video"===s.name||"audio"===s.name)&&i.src&&s.src.push(i.src):this.options.domain=i.href);const t=this.parseStyle(e);if("img"===e.name){if(i.src&&(i.src.includes("webp")&&(e.webp="T"),i.src.includes("data:")&&!i["original-src"]&&(i.ignore="T"),!i.ignore||e.webp||i.src.includes("cloud://"))){for(let n=this.stack.length;n--;){const s=this.stack[n];"a"===s.name&&(e.a=s.attrs),"table"!==s.name||e.webp||i.src.includes("cloud://")||(!t.display||t.display.includes("inline")?e.t="inline-block":e.t=t.display,t.display=void 0),s.c=1}i.i=this.imgList.length.toString();let s=i["original-src"]||i.src;this.imgList.push(s),e.t||(this.imgList._unloadimgs+=1),this.options.lazyLoad&&(i["data-src"]=i.src,i.src=void 0)}"inline"===t.display&&(t.display=""),i.ignore&&(t["max-width"]=t["max-width"]||"100%",i.style+=";-webkit-touch-callout:none"),parseInt(t.width)>kt&&(t.height=void 0),isNaN(parseInt(t.width))||(e.w="T"),!isNaN(parseInt(t.height))&&(!t.height.includes("%")||s&&(s.attrs.style||"").includes("height"))&&(e.h="T")}else if("svg"===e.name)return n.push(e),this.stack.push(e),void this.popNode();for(const e in t)t[e]&&(i.style+=`;${e}:${t[e].replace(" !important","")}`);i.style=i.style.substr(1)||void 0}else("pre"===e.name||(i.style||"").includes("white-space")&&i.style.includes("pre"))&&2!==this.pre&&(this.pre=e.pre=1),e.children=[],this.stack.push(e);n.push(e)},It.prototype.onCloseTag=function(t){let e;for(t=this.xml?t:t.toLowerCase(),e=this.stack.length;e--&&this.stack[e].name!==t;);if(-1!==e)for(;this.stack.length>e;)this.popNode();else if("p"===t||"br"===t){(this.stack.length?this.stack[this.stack.length-1].children:this.nodes).push({name:t,attrs:{class:bt[t]||"",style:this.tagStyle[t]||""}})}},It.prototype.popNode=function(){const t=this.stack.pop();let e=t.attrs;const i=t.children,s=this.stack[this.stack.length-1],n=s?s.children:this.nodes;if(!this.hook(t)||wt.ignoreTags[t.name])return"title"===t.name&&i.length&&"text"===i[0].type&&this.options.setTitle&&j({title:i[0].text}),void n.pop();if(t.pre&&2!==this.pre){this.pre=t.pre=void 0;for(let t=this.stack.length;t--;)this.stack[t].pre&&(this.pre=1)}const a={};if("svg"===t.name){if(this.xml>1)return void this.xml--;let i="";const s=e.style;return e.style="",e.xmlns="http://www.w3.org/2000/svg",function t(e){if("text"===e.type)return void(i+=e.text);const s=wt.svgDict[e.name]||e.name;i+="<"+s;for(const n in e.attrs){const t=e.attrs[n];t&&(i+=` ${wt.svgDict[n]||n}="${t}"`)}if(e.children){i+=">";for(let i=0;i<e.children.length;i++)t(e.children[i]);i+="</"+s+">"}else i+="/>"}(t),t.name="img",t.attrs={src:"data:image/svg+xml;utf8,"+i.replace(/#/g,"%23"),style:s,ignore:"T"},t.children=void 0,void(this.xml=!1)}if(e.align&&("table"===t.name?"center"===e.align?a["margin-inline-start"]=a["margin-inline-end"]="auto":a.float=e.align:a["text-align"]=e.align,e.align=void 0),e.dir&&(a.direction=e.dir,e.dir=void 0),"font"===t.name&&(e.color&&(a.color=e.color,e.color=void 0),e.face&&(a["font-family"]=e.face,e.face=void 0),e.size)){let t=parseInt(e.size);isNaN(t)||(t<1?t=1:t>7&&(t=7),a["font-size"]=["x-small","small","medium","large","x-large","xx-large","xxx-large"][t-1]),e.size=void 0}if((e.class||"").includes("align-center")&&(a["text-align"]="center"),Object.assign(a,this.parseStyle(t)),"table"!==t.name&&parseInt(a.width)>kt&&(a["max-width"]="100%",a["box-sizing"]="border-box"),wt.blockTags[t.name]?t.name="div":wt.trustTags[t.name]||this.xml||(t.name="span"),"a"===t.name||"ad"===t.name||"iframe"===t.name)this.expose();else if("video"===t.name)(a.height||"").includes("auto")&&(a.height=void 0);else if("ul"!==t.name&&"ol"!==t.name||!t.c){if("table"===t.name){let s=parseFloat(e.cellpadding),n=parseFloat(e.cellspacing);const o=parseFloat(e.border),r=a["border-color"],l=a["border-style"];if(t.c&&(isNaN(s)&&(s=2),isNaN(n)&&(n=2)),o&&(e.style+=`;border:${o}px ${l||"solid"} ${r||"gray"}`),t.flag&&t.c){a.display="grid",n?(a["grid-gap"]=n+"px",a.padding=n+"px"):o&&(e.style+=";border-left:0;border-top:0");const c=[],d=[],u=[],h={};!function t(e){for(let i=0;i<e.length;i++)"tr"===e[i].name?d.push(e[i]):t(e[i].children||[])}(i);for(let t=1;t<=d.length;t++){let e=1;for(let i=0;i<d[t-1].children.length;i++){const a=d[t-1].children[i];if("td"===a.name||"th"===a.name){for(;h[t+"."+e];)e++;let i=a.attrs.style||"",d=i.indexOf("width")?i.indexOf(";width"):0;if(-1!==d){let t=i.indexOf(";",d+6);-1===t&&(t=i.length),a.attrs.colspan||(c[e]=i.substring(d?d+7:6,t)),i=i.substr(0,d)+i.substr(t)}if(i+=";display:flex",d=i.indexOf("vertical-align"),-1!==d){const t=i.substr(d+15,10);t.includes("middle")?i+=";align-items:center":t.includes("bottom")&&(i+=";align-items:flex-end")}else i+=";align-items:center";if(d=i.indexOf("text-align"),-1!==d){const t=i.substr(d+11,10);t.includes("center")?i+=";justify-content: center":t.includes("right")&&(i+=";justify-content: right")}if(i=(o?`;border:${o}px ${l||"solid"} ${r||"gray"}`+(n?"":";border-right:0;border-bottom:0"):"")+(s?`;padding:${s}px`:"")+";"+i,a.attrs.colspan&&(i+=`;grid-column-start:${e};grid-column-end:${e+parseInt(a.attrs.colspan)}`,a.attrs.rowspan||(i+=`;grid-row-start:${t};grid-row-end:${t+1}`),e+=parseInt(a.attrs.colspan)-1),a.attrs.rowspan){i+=`;grid-row-start:${t};grid-row-end:${t+parseInt(a.attrs.rowspan)}`,a.attrs.colspan||(i+=`;grid-column-start:${e};grid-column-end:${e+1}`);for(let i=1;i<a.attrs.rowspan;i++)for(let s=0;s<(a.attrs.colspan||1);s++)h[t+i+"."+(e-s)]=1}i&&(a.attrs.style=i),u.push(a),e++}}if(1===t){let t="";for(let i=1;i<e;i++)t+=(c[i]?c[i]:"auto")+" ";a["grid-template-columns"]=t}}t.children=u}else t.c&&(a.display="table"),isNaN(n)||(a["border-spacing"]=n+"px"),(o||s)&&function t(e){for(let i=0;i<e.length;i++){const n=e[i];"th"===n.name||"td"===n.name?(o&&(n.attrs.style=`border:${o}px ${l||"solid"} ${r||"gray"};${n.attrs.style||""}`),s&&(n.attrs.style=`padding:${s}px;${n.attrs.style||""}`)):n.children&&t(n.children)}}(i);if(this.options.scrollTable&&!(e.style||"").includes("inline")){const i=Object.assign({},t);t.name="div",t.attrs={style:"overflow:auto"},t.children=[i],e=i.attrs}}else if("td"!==t.name&&"th"!==t.name||!e.colspan&&!e.rowspan)if("ruby"===t.name){t.name="span";for(let t=0;t<i.length-1;t++)"text"===i[t].type&&"rt"===i[t+1].name&&(i[t]={name:"div",attrs:{style:"display:inline-block;text-align:center"},children:[{name:"div",attrs:{style:"font-size:50%;"+(i[t+1].attrs.style||"")},children:i[t+1].children},i[t]]},i.splice(t+1,1))}else t.c&&function(t){t.c=2;for(let e=t.children.length;e--;){const i=t.children[e];i.c&&"table"!==i.name||(t.c=1)}}(t);else for(let r=this.stack.length;r--;)if("table"===this.stack[r].name){this.stack[r].flag=1;break}}else{const t={a:"lower-alpha",A:"upper-alpha",i:"lower-roman",I:"upper-roman"};t[e.type]&&(e.style+=";list-style-type:"+t[e.type],e.type=void 0);for(let e=i.length;e--;)"li"===i[e].name&&(i[e].c=1)}if((a.display||"").includes("flex")&&!t.c)for(let r=i.length;r--;){const t=i[r];t.f&&(t.attrs.style=(t.attrs.style||"")+t.f,t.f=void 0)}const o=s&&((s.attrs.style||"").includes("flex")||(s.attrs.style||"").includes("grid"))&&!t.c;o&&(t.f=";max-width:100%"),i.length>=50&&t.c&&!(a.display||"").includes("flex")&&Ct(i);for(const r in a)if(a[r]){const i=`;${r}:${a[r].replace(" !important","")}`;o&&(r.includes("flex")&&"flex-direction"!==r||"align-self"===r||r.includes("grid")||"-"===a[r][0]||r.includes("width")&&i.includes("%"))?(t.f+=i,"width"===r&&(e.style+=";width:100%")):e.style+=i}e.style=e.style.substr(1)||void 0},It.prototype.onText=function(t){if(!this.pre){let e,i="";for(let s=0,n=t.length;s<n;s++)vt[t[s]]?(" "!==i[i.length-1]&&(i+=" "),"\n"!==t[s]||e||(e=!0)):i+=t[s];if(" "===i){if(e)return;{const t=this.stack[this.stack.length-1];if(t&&"t"===t.name[0])return}}t=i}const e=Object.create(null);if(e.type="text",e.text=$t(t),this.hook(e)){(this.stack.length?this.stack[this.stack.length-1].children:this.nodes).push(e)}},Tt.prototype.parse=function(t){this.content=t||"",this.i=0,this.start=0,this.state=this.text;for(let e=this.content.length;-1!==this.i&&this.i<e;)this.state()},Tt.prototype.checkClose=function(t){const e="/"===this.content[this.i];return!!(">"===this.content[this.i]||e&&">"===this.content[this.i+1])&&(t&&this.handler[t](this.content.substring(this.start,this.i)),this.i+=e?2:1,this.start=this.i,this.handler.onOpenTag(e),"script"===this.handler.tagName?(this.i=this.content.indexOf("</",this.i),-1!==this.i&&(this.i+=2,this.start=this.i),this.state=this.endTag):this.state=this.text,!0)},Tt.prototype.text=function(){if(this.i=this.content.indexOf("<",this.i),-1===this.i)return void(this.start<this.content.length&&this.handler.onText(this.content.substring(this.start,this.content.length)));const t=this.content[this.i+1];if(t>="a"&&t<="z"||t>="A"&&t<="Z")this.start!==this.i&&this.handler.onText(this.content.substring(this.start,this.i)),this.start=++this.i,this.state=this.tagName;else if("/"===t||"!"===t||"?"===t){this.start!==this.i&&this.handler.onText(this.content.substring(this.start,this.i));const e=this.content[this.i+2];if("/"===t&&(e>="a"&&e<="z"||e>="A"&&e<="Z"))return this.i+=2,this.start=this.i,void(this.state=this.endTag);let i="--\x3e";"!"===t&&"-"===this.content[this.i+2]&&"-"===this.content[this.i+3]||(i=">"),this.i=this.content.indexOf(i,this.i),-1!==this.i&&(this.i+=i.length,this.start=this.i)}else this.i++},Tt.prototype.tagName=function(){if(vt[this.content[this.i]]){for(this.handler.onTagName(this.content.substring(this.start,this.i));vt[this.content[++this.i]];);this.i<this.content.length&&!this.checkClose()&&(this.start=this.i,this.state=this.attrName)}else this.checkClose("onTagName")||this.i++},Tt.prototype.attrName=function(){let t=this.content[this.i];if(vt[t]||"="===t){this.handler.onAttrName(this.content.substring(this.start,this.i));let e="="===t;const i=this.content.length;for(;++this.i<i;)if(t=this.content[this.i],!vt[t]){if(this.checkClose())return;if(e)return this.start=this.i,void(this.state=this.attrVal);if("="!==this.content[this.i])return this.start=this.i,void(this.state=this.attrName);e=!0}}else this.checkClose("onAttrName")||this.i++},Tt.prototype.attrVal=function(){const t=this.content[this.i],e=this.content.length;if('"'===t||"'"===t){if(this.start=++this.i,this.i=this.content.indexOf(t,this.i),-1===this.i)return;this.handler.onAttrVal(this.content.substring(this.start,this.i))}else for(;this.i<e;this.i++){if(vt[this.content[this.i]]){this.handler.onAttrVal(this.content.substring(this.start,this.i));break}if(this.checkClose("onAttrVal"))return}for(;vt[this.content[++this.i]];);this.i<e&&!this.checkClose()&&(this.start=this.i,this.state=this.attrName)},Tt.prototype.endTag=function(){const t=this.content[this.i];if(vt[t]||">"===t||"/"===t){if(this.handler.onCloseTag(this.content.substring(this.start,this.i)),">"!==t&&(this.i=this.content.indexOf(">",this.i),-1===this.i))return;this.start=++this.i,this.state=this.text}else this.i++};const Nt=[];const Mt=it({name:"u-parse",data:()=>({nodes:[]}),props:{containerStyle:{type:String,default:""},content:{type:String,default:""},copyLink:{type:[Boolean,String],default:!0},domain:String,errorImg:{type:String,default:""},lazyLoad:{type:[Boolean,String],default:!1},loadingImg:{type:String,default:""},pauseVideo:{type:[Boolean,String],default:!0},previewImg:{type:[Boolean,String],default:!0},scrollTable:[Boolean,String],selectable:[Boolean,String],setTitle:{type:[Boolean,String],default:!0},showImgMenu:{type:[Boolean,String],default:!0},tagStyle:Object,useAnchor:[Boolean,Number]},emits:["load","ready","imgtap","linktap","play","error"],components:{node:_t},watch:{content(t){this.setContent(t)}},created(){this.plugins=[];for(let t=Nt.length;t--;)this.plugins.push(new Nt[t](this))},mounted(){this.content&&!this.nodes.length&&this.setContent(this.content)},beforeDestroy(){this._hook("onDetached")},methods:{in(t,e,i){t&&e&&i&&(this._in={page:t,selector:e,scrollTop:i})},navigateTo(t,e){return new Promise(((i,s)=>{if(!this.useAnchor)return void s(Error("Anchor is disabled"));e=e||parseInt(this.useAnchor)||0;const n=A().in(this._in?this._in.page:this).select((this._in?this._in.selector:"._root")+(t?` #${t}`:"")).boundingClientRect();this._in?n.select(this._in.selector).scrollOffset().select(this._in.selector).boundingClientRect():n.selectViewport().scrollOffset(),n.exec((t=>{if(!t[0])return void s(Error("Label not found"));const n=t[1].scrollTop+t[0].top-(t[2]?t[2].top:0)+e;this._in?this._in.page[this._in.scrollTop]=n:U({scrollTop:n,duration:300}),i()}))}))},getText(t){let e="";return function t(i){for(let s=0;s<i.length;s++){const n=i[s];if("text"===n.type)e+=n.text.replace(/&amp;/g,"&");else if("br"===n.name)e+="\n";else{const i="p"===n.name||"div"===n.name||"tr"===n.name||"li"===n.name||"h"===n.name[0]&&n.name[1]>"0"&&n.name[1]<"7";i&&e&&"\n"!==e[e.length-1]&&(e+="\n"),n.children&&t(n.children),i&&"\n"!==e[e.length-1]?e+="\n":"td"!==n.name&&"th"!==n.name||(e+="\t")}}}(t||this.nodes),e},getRect(){return new Promise(((t,e)=>{A().in(this).select("#_root").boundingClientRect().exec((i=>i[0]?t(i[0]):e(Error("Root label not found"))))}))},pauseMedia(){for(let t=(this._videos||[]).length;t--;)this._videos[t].pause()},setPlaybackRate(t){this.playbackRate=t;for(let e=(this._videos||[]).length;e--;)this._videos[e].playbackRate(t)},setContent(t,e){e&&this.imgList||(this.imgList=[]);const i=new It(this).parse(t);if(this.$set(this,"nodes",e?(this.nodes||[]).concat(i):i),this._videos=[],this.$nextTick((()=>{this._hook("onLoad"),this.$emit("load")})),this.lazyLoad||this.imgList._unloadimgs<this.imgList.length/2){let t=0;const e=i=>{i&&i.height||(i={}),i.height===t?this.$emit("ready",i):(t=i.height,setTimeout((()=>{this.getRect().then(e).catch(e)}),350))};this.getRect().then(e).catch(e)}else this.imgList._unloadimgs||this.getRect().then((t=>{this.$emit("ready",t)})).catch((()=>{this.$emit("ready",{})}))},_hook(t){for(let e=Nt.length;e--;)this.plugins[e][t]&&this.plugins[e][t]()}}},[["render",function(t,e,i,l,c,d){const u=N("node"),h=p;return s(),n(h,{id:"_root",class:o((i.selectable?"_select ":"")+"_root"),style:r(i.containerStyle)},{default:a((()=>[c.nodes[0]?(s(),n(u,{key:1,childs:c.nodes,opts:[i.lazyLoad,i.loadingImg,i.errorImg,i.showImgMenu,i.selectable],name:"span"},null,8,["childs","opts"])):w(t.$slots,"default",{key:0},void 0,!0)])),_:3},8,["class","style"])}],["__scopeId","data-v-5b9de8e9"]]);const zt=it({name:"u-swiper",mixins:[e,i,{props:{list:{type:Array,default:t.swiper.list},indicator:{type:Boolean,default:t.swiper.indicator},indicatorActiveColor:{type:String,default:t.swiper.indicatorActiveColor},indicatorInactiveColor:{type:String,default:t.swiper.indicatorInactiveColor},indicatorStyle:{type:[String,Object],default:t.swiper.indicatorStyle},indicatorMode:{type:String,default:t.swiper.indicatorMode},autoplay:{type:Boolean,default:t.swiper.autoplay},current:{type:[String,Number],default:t.swiper.current},currentItemId:{type:String,default:t.swiper.currentItemId},interval:{type:[String,Number],default:t.swiper.interval},duration:{type:[String,Number],default:t.swiper.duration},circular:{type:Boolean,default:t.swiper.circular},previousMargin:{type:[String,Number],default:t.swiper.previousMargin},nextMargin:{type:[String,Number],default:t.swiper.nextMargin},acceleration:{type:Boolean,default:t.swiper.acceleration},displayMultipleItems:{type:Number,default:t.swiper.displayMultipleItems},easingFunction:{type:String,default:t.swiper.easingFunction},keyName:{type:String,default:t.swiper.keyName},imgMode:{type:String,default:t.swiper.imgMode},height:{type:[String,Number],default:t.swiper.height},bgColor:{type:String,default:t.swiper.bgColor},radius:{type:[String,Number],default:t.swiper.radius},loading:{type:Boolean,default:t.swiper.loading},showTitle:{type:Boolean,default:t.swiper.showTitle}}}],data:()=>({currentIndex:0}),watch:{current(t,e){t!==e&&(this.currentIndex=t)}},computed:{itemStyle(){return t=>{const e={};return this.nextMargin&&this.previousMargin&&(e.borderRadius=uni.$u.addUnit(this.radius),t!==this.currentIndex&&(e.transform="scale(0.92)")),e}}},methods:{getItemType(t){return"string"==typeof t?uni.$u.test.video(this.getSource(t))?"video":"image":"object"==typeof t&&this.keyName?t.type?"image"===t.type?"image":"video"===t.type?"video":"image":uni.$u.test.video(this.getSource(t))?"video":"image":void 0},getSource(t){return"string"==typeof t?t:"object"==typeof t&&this.keyName?t[this.keyName]:(uni.$u.error("请按格式传递列表参数"),"")},change(t){const{current:e}=t.detail;this.pauseVideo(this.currentIndex),this.currentIndex=e,this.$emit("change",t.detail)},pauseVideo(t){const e=this.getSource(this.list[t]);if(uni.$u.test.video(e)){g(`video-${t}`,this).pause()}},getPoster:t=>"object"==typeof t&&t.poster?t.poster:"",clickHandler(t){this.$emit("click",t)}}},[["render",function(t,e,i,o,g,$){const C=m(y("u-loading-icon"),et),I=p,T=b,N=k,M=v,z=x,B=S,j=m(y("u-swiper-indicator"),ct);return s(),n(I,{class:"u-swiper",style:r({backgroundColor:t.bgColor,height:t.$u.addUnit(t.height),borderRadius:t.$u.addUnit(t.radius)})},{default:a((()=>[t.loading?(s(),n(I,{key:0,class:"u-swiper__loading"},{default:a((()=>[l(C,{mode:"circle"})])),_:1})):(s(),n(B,{key:1,class:"u-swiper__wrapper",style:r({height:t.$u.addUnit(t.height)}),onChange:$.change,circular:t.circular,interval:t.interval,duration:t.duration,autoplay:t.autoplay,current:t.current,currentItemId:t.currentItemId,previousMargin:t.$u.addUnit(t.previousMargin),nextMargin:t.$u.addUnit(t.nextMargin),acceleration:t.acceleration,displayMultipleItems:t.displayMultipleItems,easingFunction:t.easingFunction},{default:a((()=>[w(t.$slots,"default",{},(()=>[(s(!0),d(u,null,h(t.list,((e,i)=>(s(),n(z,{key:i,class:"u-swiper__wrapper__item"},{default:a((()=>[l(I,{style:r([$.itemStyle(i)]),class:"u-swiper__wrapper__item__wrapper"},{default:a((()=>["image"===$.getItemType(e)?(s(),n(T,{key:0,class:"u-swiper__wrapper__item__wrapper__image",src:$.getSource(e),mode:t.imgMode,onClick:t=>$.clickHandler(i),style:r({height:t.$u.addUnit(t.height),borderRadius:t.$u.addUnit(t.radius)})},null,8,["src","mode","onClick","style"])):c("",!0),"video"===$.getItemType(e)?(s(),n(N,{key:1,class:"u-swiper__wrapper__item__wrapper__video",id:`video-${i}`,"enable-progress-gesture":!1,src:$.getSource(e),poster:$.getPoster(e),title:t.showTitle&&t.$u.test.object(e)&&e.title?e.title:"",style:r({height:t.$u.addUnit(t.height)}),controls:"",onClick:t=>$.clickHandler(i)},null,8,["id","src","poster","title","style","onClick"])):c("",!0),t.showTitle&&t.$u.test.object(e)&&e.title&&t.$u.test.image($.getSource(e))?(s(),n(M,{key:2,class:"u-swiper__wrapper__item__wrapper__title u-line-1"},{default:a((()=>[f(_(e.title),1)])),_:2},1024)):c("",!0)])),_:2},1032,["style"])])),_:2},1024)))),128))]),!0)])),_:3},8,["style","onChange","circular","interval","duration","autoplay","current","currentItemId","previousMargin","nextMargin","acceleration","displayMultipleItems","easingFunction"])),l(I,{class:"u-swiper__indicator",style:r([t.$u.addStyle(t.indicatorStyle)])},{default:a((()=>[w(t.$slots,"indicator",{},(()=>[t.loading||!t.indicator||t.showTitle?c("",!0):(s(),n(j,{key:0,indicatorActiveColor:t.indicatorActiveColor,indicatorInactiveColor:t.indicatorInactiveColor,length:t.list.length,current:g.currentIndex,indicatorMode:t.indicatorMode},null,8,["indicatorActiveColor","indicatorInactiveColor","length","current","indicatorMode"]))]),!0)])),_:3},8,["style"])])),_:3},8,["style"])}],["__scopeId","data-v-726aecef"]]),Bt=it({__name:"noticeDialog",setup(t,{expose:e}){const i=O(),o=L(null),r=L([]);e({open:()=>{o.value.open()},openOnLaunch:()=>{const t=i.messages[0];t&&(r.value=P("__noticeReads__")||[],r.value.includes(t.id)||(r.value.push(t.id),o.value.open()))}});const c=async()=>{F("__noticeReads__",r.value)};return(t,e)=>{const r=m(y("u-parse"),Mt),g=p,f=x,_=m(y("u-swiper-pro"),zt),w=m(y("uni-popup-dialog"),at),b=m(y("uni-popup"),ot);return s(),n(b,{ref_key:"alertDialog",ref:o,type:"dialog"},{default:a((()=>{var e,o;return[l(w,{type:(null==(e=R(i).messages[0])?void 0:e.type)||"info",cancelText:"关闭",confirmText:"确定",onConfirm:c,title:(null==(o=R(i).messages[0])?void 0:o.title)||t.通知},{default:a((()=>[l(g,{style:{width:"100%",height:"100%"}},{default:a((()=>[l(_,{style:{"background-color":"#fff"},autoplay:!1,list:R(i).messages,indicator:!0,indicatorInactiveColor:"#f4f4f5",indicatorActiveColor:"#3893FE"},{default:a((()=>[(s(!0),d(u,null,h(R(i).messages,((t,e)=>(s(),n(f,{key:e},{default:a((()=>[l(g,{class:"notyContent"},{default:a((()=>[l(r,{content:t.content},null,8,["content"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["list"])])),_:1})])),_:1},8,["type","title"])]})),_:1},512)}}},[["__scopeId","data-v-4f76bf28"]]);const jt=it({name:"u-skeleton",mixins:[e,i,{props:{loading:{type:Boolean,default:t.skeleton.loading},animate:{type:Boolean,default:t.skeleton.animate},rows:{type:[String,Number],default:t.skeleton.rows},rowsWidth:{type:[String,Number,Array],default:t.skeleton.rowsWidth},rowsHeight:{type:[String,Number,Array],default:t.skeleton.rowsHeight},title:{type:Boolean,default:t.skeleton.title},titleWidth:{type:[String,Number],default:t.skeleton.titleWidth},titleHeight:{type:[String,Number],default:t.skeleton.titleHeight},avatar:{type:Boolean,default:t.skeleton.avatar},avatarSize:{type:[String,Number],default:t.skeleton.avatarSize},avatarShape:{type:String,default:t.skeleton.avatarShape}}}],data:()=>({width:0}),watch:{loading(){this.getComponentWidth()}},computed:{rowsArray(){/%$/.test(this.rowsHeight)&&uni.$u.error("rowsHeight参数不支持百分比单位");const t=[];for(let e=0;e<this.rows;e++){let i={},s=uni.$u.test.array(this.rowsWidth)?this.rowsWidth[e]||(e===this.rows-1?"70%":"100%"):e===this.rows-1?"70%":this.rowsWidth,n=uni.$u.test.array(this.rowsHeight)?this.rowsHeight[e]||"18px":this.rowsHeight;i.marginTop=this.title||0!==e?this.title&&0===e?"20px":"12px":0,/%$/.test(s)?i.width=uni.$u.addUnit(this.width*parseInt(s)/100):i.width=uni.$u.addUnit(s),i.height=uni.$u.addUnit(n),t.push(i)}return t},uTitleWidth(){let t=0;return t=/%$/.test(this.titleWidth)?uni.$u.addUnit(this.width*parseInt(this.titleWidth)/100):uni.$u.addUnit(this.titleWidth),uni.$u.addUnit(t)}},mounted(){this.init()},methods:{init(){this.getComponentWidth()},async setNvueAnimation(){},async getComponentWidth(){await uni.$u.sleep(20),this.$uGetRect(".u-skeleton__wrapper__content").then((t=>{this.width=t.width}))}}},[["render",function(t,e,i,g,m,y){const f=p;return s(),n(f,{class:"u-skeleton"},{default:a((()=>[t.loading?(s(),n(f,{key:0,class:"u-skeleton__wrapper",ref:"u-skeleton__wrapper",style:{display:"flex","flex-direction":"row"}},{default:a((()=>[t.avatar?(s(),n(f,{key:0,class:o(["u-skeleton__wrapper__avatar",[`u-skeleton__wrapper__avatar--${t.avatarShape}`,t.animate&&"animate"]]),style:r({height:t.$u.addUnit(t.avatarSize),width:t.$u.addUnit(t.avatarSize)})},null,8,["class","style"])):c("",!0),l(f,{class:"u-skeleton__wrapper__content",ref:"u-skeleton__wrapper__content",style:{flex:"1"}},{default:a((()=>[t.title?(s(),n(f,{key:0,class:o(["u-skeleton__wrapper__content__title",[t.animate&&"animate"]]),style:r({width:y.uTitleWidth,height:t.$u.addUnit(t.titleHeight)})},null,8,["style","class"])):c("",!0),(s(!0),d(u,null,h(y.rowsArray,((e,i)=>(s(),n(f,{class:o(["u-skeleton__wrapper__content__rows",[t.animate&&"animate"]]),key:i,style:r({width:e.width,height:e.height,marginTop:e.marginTop})},null,8,["class","style"])))),128))])),_:1},512)])),_:1},512)):w(t.$slots,"default",{key:1},void 0,!0)])),_:3})}],["__scopeId","data-v-ca8a4da7"]]),At=it({__name:"seatsgroup",props:{title:{type:String,default:"常用座位"},holdbox:{type:Boolean,default:!1},seatinfos:{type:Object,default:[]}},setup(t){const e=t,i=H((()=>e.holdbox&&0==e.seatinfos?[{info:"",lib_id:0,seat_key:""},{info:"",lib_id:0,seat_key:""}]:e.seatinfos)),o=async()=>{let t="/pages/home/setUserSeat/setUserSeat?type=oftenseats";"常用座位"!=e.title&&(t="/pages/home/setUserSeat/setUserSeat?type=tmrrowseats"),I({url:t,fail:async function(){W({title:"加载中...",icon:"loading",duration:3e3});const t=D();await t.initChildrenLayout(!0),V()}})};return(t,r)=>{const g=p,w=m(y("u-skeleton"),jt);return s(),d(u,null,[l(g,{class:"title-bar"},{default:a((()=>[l(g,null,{default:a((()=>[f(_(e.title),1)])),_:1}),l(g,{class:"seatmore",onClick:o},{default:a((()=>[f("更多")])),_:1})])),_:1}),l(g,{class:"seatsblock"},{default:a((()=>[(s(!0),d(u,null,h(R(i),((t,e)=>(s(),n(g,{onClick:o},{default:a((()=>[Number(e)<2?(s(),n(g,{class:"seatinfo",key:e},{default:a((()=>[l(w,{loading:!t.info,animate:!0},{default:a((()=>[f(_(t.info),1)])),_:2},1032,["loading"])])),_:2},1024)):c("",!0)])),_:2},1024)))),256))])),_:1})],64)}}},[["__scopeId","data-v-7bebe1ed"]]),Ut=it({__name:"toolIcon",props:{iconPath:{type:String,default:"/"},iconSize:{type:String,default:"32px"},text:{type:String,default:"功能图标"},bgcolor:{type:String,default:"#fff"}},setup(t){const e=t;return q((t=>({"2bf90ddb":e.bgcolor}))),(t,i)=>{const o=m(y("u-image"),rt),r=p;return s(),n(r,{class:"toolContainer"},{default:a((()=>[l(r,{class:"toolBlock"},{default:a((()=>[l(r,{class:"Icon"},{default:a((()=>[l(o,{shape:"square",src:e.iconPath,width:e.iconSize,height:e.iconSize},null,8,["src","width","height"])])),_:1})])),_:1}),l(r,{class:"toolName"},{default:a((()=>[f(_(e.text),1)])),_:1})])),_:1})}}},[["__scopeId","data-v-5a79a0c5"]]),Ot=it({__name:"toolsBox",setup(t){const e=L(null),i=()=>{e.value.open()},o=E(),g=H((()=>t=>{t??(t=-1);const e={style:"font-weight:500;",score:Number(100*t).toFixed(1)+"%"};return t<0&&(e.score="扫描失败"),e.style+=t>=.8?"color:#fa3534":t>.5?"color:#ff9900":"color:#909399",e})),w=L(!0),b=L(null),k=L([]),v=async()=>{w.value=!0,k.value=[...o.tmrrowseats,...o.oftenseats],b.value.open(),setTimeout((()=>{w.value=!1}),2e3),k.value=await Z.querySeatClash.call(this)},x=L(null),S=()=>{x.value.handlePushConfig()};return(t,o)=>{const $=p,C=m(y("u-loading-icon"),et),I=m(y("uni-popup-dialog"),at),T=m(y("uni-popup"),ot);return s(),d(u,null,[l($,{class:"toolsbox"},{default:a((()=>[l(Ut,{iconPath:"/static/rayda.png",iconSize:"30px",text:"冲突扫描",onClick:v}),l(Ut,{iconPath:"/static/pushAir.png",iconSize:"36px",text:"定制推送",onClick:S}),l(Ut,{iconPath:"/static/noticeBell.png",iconSize:"27px",text:"通知公告",onClick:i})])),_:1}),l(T,{ref_key:"runDialog",ref:b,type:"dialog"},{default:a((()=>[l(I,{type:"info",showCancelButton:!1,closeOnClickOverlay:"",cancelText:"取消",confirmText:"确定",title:"冲突座位扫描"},{default:a((()=>[l($,{style:{width:"100%",padding:"0 15px"}},{default:a((()=>[(s(!0),d(u,null,h(k.value,(t=>(s(),n($,{style:{display:"grid","grid-template-columns":"auto auto","column-gap":"10px","justify-content":"space-between","margin-bottom":"15px"}},{default:a((()=>[l($,null,{default:a((()=>[f(_(t.seatInfo||t.info),1)])),_:2},1024),(s(),n($,{key:w.value,style:{height:"20px"}},{default:a((()=>[l(C,{mode:"circle",size:"18","timing-function":"linear",show:w.value,"inactive-color":"#18B566"},null,8,["show"]),w.value?c("",!0):(s(),n($,{key:0,style:r(R(g)(t.clashScore).style)},{default:a((()=>[f(_(R(g)(t.clashScore).score),1)])),_:2},1032,["style"]))])),_:2},1024))])),_:2},1024)))),256)),l($,{style:{color:"#909399","font-size":"12px",padding:"5px 0 0 0"}},{default:a((()=>[G("p",{style:{"margin-bottom":"5px"}},"- 若冲突率高于 80%，请务必更换座位"),G("p",{style:{"margin-bottom":"5px"}},"- 若能够稳定预约座位，则不用做理会"),G("p",{style:{"margin-bottom":"5px"}},"- 以上基于现有数据库计算，仅作参考"),G("p",null,"🔺 提示：公众号换座后请在本页刷新同步")])),_:1})])),_:1})])),_:1})])),_:1},512),l(lt,{ref_key:"pushDiag",ref:x,onlyPop:""},null,512),l(Bt,{ref_key:"notyDialog",ref:e},null,512)],64)}}},[["__scopeId","data-v-7657150c"]]),Lt=it({__name:"home",setup(t){const e=O(),i=D(),n=E(),o=L(null);X((async()=>{1===J.userInfo.status&&await K.logout(),await i.refreshPupuIndex()})),Q((async()=>{setTimeout((()=>{j({title:i.pupuIndex.user_sch||"首页"}),o.value.openOnLaunch()}),600)})),Y((async()=>{const t=e.getAppInfo(),s=i.refreshPupuIndex(!0);await t,await s,tt()}));const r=H((()=>e.tips));return(t,i)=>{const c=m(y("u-swiper"),dt),h=m(y("u-notice-bar"),pt),g=p,_=m(y("u-transition"),nt);return s(),d(u,null,[l(g,{class:"content"},{default:a((()=>[l(c,{class:"swiper-box",list:R(e).banners,showTitle:"",circular:""},null,8,["list"]),l(g,null,{default:a((()=>[l(h,{class:"tipsBar",direction:"column",mode:"link",url:"/pages/home/noticePage/noticePage",duration:R(r).duration||3e3,disableTouch:!1,text:R(r).message,style:{"border-radius":"5px","box-shadow":"0 1px 2px #e8e8e8"},color:R(r).color||"#2979FF",bgColor:R(r).bgColor||"#fff"},null,8,["duration","text","color","bgColor"])])),_:1}),l(_,{show:"",mode:"fade-up",duration:"500"},{default:a((()=>[l(g,{class:"layoutBox"},{default:a((()=>[l(At,{seatinfos:R(n).oftenseats,title:"常用座位",holdbox:""},null,8,["seatinfos"])])),_:1}),l(g,{class:"layoutBox"},{default:a((()=>[l(g,{style:{"font-size":"15px","font-weight":"bold",padding:"15px 0"}},{default:a((()=>[f("应用工具")])),_:1}),l(Ot)])),_:1})])),_:1})])),_:1}),l(Bt,{ref_key:"notyDialog",ref:o},null,512)],64)}}},[["__scopeId","data-v-50ccec41"]]);export{Lt as default};
