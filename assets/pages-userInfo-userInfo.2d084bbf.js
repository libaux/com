import{m as t,a as e,B as a,o as s,c as o,w as n,p as i,a1 as l,e as r,l as u,t as c,g as p,F as d,r as m,C as h,u as f,i as g,q as v,ad as b,J as x,O as k,K as _,X as y,ae as w,Y as C,Z as T,a8 as j,$ as I,a0 as L,j as U,L as E,f as $,T as z,E as S,z as q,af as B,P as D,k as K}from"./index-6e05845e.js";import{_ as V}from"./u-avatar.71060d5d.js";import{_ as Y}from"./u--text.336c1080.js";import{a as F,u as G,p as M}from"./pushConfigDialog.8d19ac61.js";import{_ as P}from"./plugin-vueexport-helper.1b428a4d.js";import{_ as A}from"./uni-list-item.afbc2c58.js";import{_ as Q}from"./uni-list.5b0fb1cf.js";import{_ as J}from"./u-button.95a88e1c.js";import{m as O,p as X,a as Z,_ as H}from"./uni-popup.bccb79eb.js";import"./u-icon.b5261818.js";import"./u-text.d338edf2.js";import"./u-transition.48dcf6f9.js";import"./uni-icons.36e299b8.js";import"./uni-easyinput.eb5d7fea.js";import"./u-row.c6eae5e3.js";import"./u-loading-icon.60612964.js";const N=P({name:"u--image",mixins:[t,F,e],components:{uvImage:G},emits:["click","error","load"]},[["render",function(t,e,l,r,u,c){const p=a("uvImage");return s(),o(p,{src:t.src,mode:t.mode,width:t.width,height:t.height,shape:t.shape,radius:t.radius,lazyLoad:t.lazyLoad,showMenuByLongpress:t.showMenuByLongpress,loadingIcon:t.loadingIcon,errorIcon:t.errorIcon,showLoading:t.showLoading,showError:t.showError,fade:t.fade,webp:t.webp,duration:t.duration,bgColor:t.bgColor,customStyle:t.customStyle,onClick:e[0]||(e[0]=e=>t.$emit("click")),onError:e[1]||(e[1]=e=>t.$emit("error")),onLoad:e[2]||(e[2]=e=>t.$emit("load"))},{loading:n((()=>[i(t.$slots,"loading")])),error:n((()=>[i(t.$slots,"error")])),_:3},8,["src","mode","width","height","shape","radius","lazyLoad","showMenuByLongpress","loadingIcon","errorIcon","showLoading","showError","fade","webp","duration","bgColor","customStyle"])}]]),{t:R}=l(O);const W=P({name:"UniPopupShare",mixins:[X],emits:["select"],props:{title:{type:String,default:""},beforeClose:{type:Boolean,default:!1}},data:()=>({bottomData:[{text:"微信",icon:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-dc-site/c2b17470-50be-11eb-b680-7980c8a877b8.png",name:"wx"},{text:"支付宝",icon:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-dc-site/d684ae40-50be-11eb-8ff1-d5dcf8779628.png",name:"wx"},{text:"QQ",icon:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-dc-site/e7a79520-50be-11eb-b997-9918a5dda011.png",name:"qq"},{text:"新浪",icon:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-dc-site/0dacdbe0-50bf-11eb-8ff1-d5dcf8779628.png",name:"sina"}]}),created(){},computed:{cancelText:()=>R("uni-popup.cancel"),shareTitleText(){return this.title||R("uni-popup.shareTitle")}},methods:{select(t,e){this.$emit("select",{item:t,index:e}),this.close()},close(){this.beforeClose||this.popup.close()}}},[["render",function(t,e,a,i,l,x){const k=f,_=g,y=v,w=b;return s(),o(_,{class:"uni-popup-share"},{default:n((()=>[r(_,{class:""},{default:n((()=>[r(_,{class:"uni-share-title"},{default:n((()=>[r(k,{class:"uni-share-title-text"},{default:n((()=>[u(c(x.shareTitleText),1)])),_:1})])),_:1}),r(_,{class:"uni-share-content"},{default:n((()=>[r(_,{class:"uni-share-content-box"},{default:n((()=>[(s(!0),p(d,null,m(l.bottomData,((t,e)=>(s(),o(_,{class:"uni-share-content-item",key:e,onClick:h((a=>x.select(t,e)),["stop"])},{default:n((()=>[r(y,{class:"uni-share-image",src:t.icon,mode:"aspectFill"},null,8,["src"]),r(k,{class:"uni-share-text"},{default:n((()=>[u(c(t.text),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1}),r(_,{class:"uni-share-button-box"},{default:n((()=>[r(w,{class:"uni-share-button",onClick:x.close},{default:n((()=>[u(c(x.cancelText),1)])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-a8ca4d4a"]]),tt=P({__name:"userInfo",setup(t){z((t=>({"876a94e6":i.value})));const e=x(),a=k((()=>e.useritems)),i=_("#fff");y((async()=>{w({frontColor:"#000000",backgroundColor:i.value}),C.userInfo.status&&1===C.userInfo.status&&T.logout(),await e.getAppInfo()})),j((async t=>{t.showLoginManage&&(m.value=!0)})),I((async()=>{await T.updateUserInfo(),L()}));const l=k((()=>C.userInfo)),c=k((()=>S().appVersion)),m=_(!1),h=()=>{q({url:"/pages/login/login"})},f=()=>{T.logout()},v=_(""),F=_(null),G=(t,e)=>{if(!t)return!1;v.value=t,F.value.open()},P=()=>{window.location.href=v.value},O=()=>{q({url:"/pages/userInfo/uservip/uservip"})},X=()=>{q({url:"/pages/userInfo/userdetail/userdetail"})},R=async()=>{try{const t=await B();0==t.result.code&&D({title:t.result.message,icon:"none",duration:1e3})}catch(t){D({title:"当前为最新版",icon:"none",duration:1e3})}},tt=_(null),et=()=>{tt.value.open()};return(t,e)=>{const i=U(K("u-avatar"),V),m=U(K("u--text"),Y),v=g,x=U(K("u--image"),N),k=U(K("uni-list-item"),A),_=U(K("uni-list"),Q),y=U(K("u-button"),J),w=b,C=U(K("uni-popup-share"),W),T=U(K("uni-popup"),Z),j=U(K("uni-popup-dialog"),H);return s(),p(d,null,[r(v,{class:"content"},{default:n((()=>[r(v,{border:!1,class:"avatar-content",onClick:X},{default:n((()=>[r(i,{src:E(l).avatar,shape:"square",size:"80",style:{"margin-left":"2px"}},null,8,["src"]),r(v,{class:"abstract"},{default:n((()=>[r(v,{class:"ab-name"},{default:n((()=>[r(v,{class:"text vip-name"},{default:n((()=>[r(m,{text:E(l).nickname,bold:"",size:"20",lines:"1"},null,8,["text"])])),_:1}),E(l).vip_date>Date.now()||E(l).vipcnts>0?(s(),o(x,{key:0,class:"text vip-icon",src:"/static/vip.png",width:"25px",height:"30px",mode:"aspectFit"})):(s(),o(x,{key:1,class:"text vip-icon",src:"/static/vip-black.png",width:"25px",height:"30px",mode:"aspectFit"}))])),_:1}),r(k,{class:"smallspan",border:!1,title:E(l).mobile,link:""},null,8,["title"])])),_:1})])),_:1}),r(_,{class:"mt10"},{default:n((()=>{var t,n,i,u,p,d,m,h,f,g,v,b,x,_,y,w;return[(null==(t=E(a).vipdate)?void 0:t.enable)?(s(),o(k,{key:0,class:"uitem",title:null==(n=E(a).vipdate)?void 0:n.name,rightText:(null==(i=E(l))?void 0:i.vip_date_str)||"--",onClick:O,link:""},null,8,["title","rightText"])):$("",!0),(null==(u=E(a).vipcnts)?void 0:u.enable)&&E(l).vip_cnts&&0!=E(l).vip_cnts?(s(),o(k,{key:1,class:"uitem",title:null==(p=E(a).vipcnts)?void 0:p.name,rightText:"剩余"+(null==(d=E(l))?void 0:d.vip_cnts)+"次",onClick:O,link:""},null,8,["title","rightText"])):$("",!0),(null==(m=E(a).tutorial)?void 0:m.enable)?(s(),o(k,{key:2,class:"uitem",title:null==(h=E(a).tutorial)?void 0:h.name,rightText:null==(f=E(a).tutorial)?void 0:f.content,onClick:e[0]||(e[0]=t=>{var e;return G(null==(e=E(a).tutorial)?void 0:e.url)}),link:""},null,8,["title","rightText"])):$("",!0),(null==(g=E(a).customPush)?void 0:g.enable)?(s(),o(M,{key:3})):$("",!0),(null==(v=E(a).contact)?void 0:v.enable)?(s(),o(k,{key:4,class:"uitem",title:null==(b=E(a).contact)?void 0:b.name,rightText:null==(x=E(a).contact)?void 0:x.content,onClick:e[1]||(e[1]=t=>{var e;return G(null==(e=E(a).contact)?void 0:e.url)}),link:""},null,8,["title","rightText"])):$("",!0),r(k,{class:"uitem",title:"版本更新",rightText:"v"+E(c),onClick:R,link:""},null,8,["rightText"]),(null==(_=E(a).share)?void 0:_.enable)?(s(),o(k,{key:5,class:"uitem",title:null==(y=E(a).share)?void 0:y.name,rightText:null==(w=E(a).share)?void 0:w.content,onClick:et,link:""},null,8,["title","rightText"])):$("",!0)]})),_:1}),E(l)._id?(s(),o(y,{key:0,class:"login-button",onClick:f,plain:"",customStyle:{height:"47px","border-radius":"0px",color:"#3b4144"}},{default:n((()=>[u("退出登录")])),_:1})):(s(),o(w,{key:1,onClick:h,type:"primary"},{default:n((()=>[u("前往登录")])),_:1}))])),_:1}),r(T,{ref_key:"share",ref:tt,type:"share",safeArea:"",backgroundColor:"#fff"},{default:n((()=>[r(C)])),_:1},512),r(T,{ref_key:"alertDialog",ref:F,type:"dialog"},{default:n((()=>[r(j,{type:"info",cancelText:"关闭",confirmText:"确定",onConfirm:P,title:"提示",content:"自动跳转至浏览器"})])),_:1},512)],64)}}},[["__scopeId","data-v-c9375c60"]]);export{tt as default};
